<!DOCTYPE html>
<html lang="ne">
<head>
  <meta charset="UTF-8" />
  <title>‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä ‡§®‡§§‡§ø‡§ú‡§æ ‡§ñ‡•ã‡§ú‡•Ä</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 2rem; background: #f0f4f8; }
    .card { background: white; padding: 2rem; border-radius: 10px; max-width: 700px; margin: auto; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    input, button { padding: 0.5rem; margin-top: 1rem; width: 100%; font-size: 1rem; }
    .result { margin-top: 1.5rem; }
    .label { font-weight: bold; margin-top: 1rem; }
    ul { padding-left: 1.2rem; }
  </style>
</head>
<body>
  <div class="card">
    <h2>üîç ‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§∞‡•ç‡§•‡•Ä ‡§®‡§§‡§ø‡§ú‡§æ ‡§ñ‡•ã‡§ú‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç</h2>
    <input type="text" id="symbolInput" placeholder="Symbol ‡§®‡§Æ‡•ç‡§¨‡§∞ ‡§ü‡§æ‡§á‡§™ ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç" />
    <button onclick="searchResult()">Search</button>
    <div class="result" id="resultBox">Loading data...</div>
  </div>

  <script>
    let students = [];

    // Google Sheet ‡§¨‡§æ‡§ü ‡§°‡•á‡§ü‡§æ ‡§≤‡•ç‡§Ø‡§æ‡§â‡§®‡•á URL (Opensheet API)
    const SHEET_ID = "1MhouQbiin4gEa4tFtez_Ck5wLSVbEH4F5Q3vNahfwqY";
    const SHEET_NAME = "Sheet1";  // ‡§§‡§™‡§æ‡§à‡§Å‡§ï‡•ã Sheet ‡§®‡§æ‡§Æ ‡§Ö‡§®‡•Å‡§∏‡§æ‡§∞ ‡§Æ‡§ø‡§≤‡§æ‡§â‡§®‡•Å‡§π‡•ã‡§∏‡•ç

    fetch(`https://opensheet.elk.sh/${SHEET_ID}/${SHEET_NAME}`)
      .then(res => res.json())
      .then(data => {
        // ‡§°‡•á‡§ü‡§æ ‡§≤‡•ç‡§Ø‡§æ‡§è‡§™‡§õ‡§ø students ‡§Æ‡§æ map ‡§ó‡§∞‡•ç‡§®‡•á, ‡§π‡§∞‡•á‡§ï ‡§™‡§Ç‡§ï‡•ç‡§§‡§ø‡§Æ‡§æ Subject ‡§∞ ‡§ó‡•ç‡§∞‡•á‡§°‡§π‡§∞‡•Ç ‡§®‡§ø‡§ï‡§æ‡§≤‡§®‡•Å
        students = data.map(r => {
          const subjects = [];
          for (let i = 1; i <= 9; i++) {
            const sub = r[`Subject${i}`];
            const th = r[`Theory${i}`];
            const pr = r[`Practical${i}`];
            if (sub) subjects.push({name: sub, theory: th || "-", practical: pr || "-"});
          }
          return {
            symbol: r["Symbol Number"] ? r["Symbol Number"].toString().trim() : "",
            name: r["Name"] || "-",
            dob: r["Date of birth"] || "-",
            gpa: r["GPA"] || "-",
            subjects: subjects
          };
        });
        document.getElementById("resultBox").innerHTML = "<em>‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§≠‡§Ø‡•ã‡•§ Symbol ‡§®‡§Æ‡•ç‡§¨‡§∞ ‡§ü‡§æ‡§á‡§™ ‡§ó‡§∞‡•á‡§∞ ‡§ñ‡•ã‡§ú‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç‡•§</em>";
      })
      .catch(err => {
        document.getElementById("resultBox").innerHTML = "<span style='color:red;'>‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§ó‡§∞‡•ç‡§® ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§Ü‡§Ø‡•ã‡•§</span>";
        console.error(err);
      });

    function searchResult() {
      const sym = document.getElementById("symbolInput").value.trim();
      const rb = document.getElementById("resultBox");
      if (!sym) {
        rb.innerHTML = "<p style='color:red;'>‡§ï‡•É‡§™‡§Ø‡§æ Symbol ‡§®‡§Æ‡•ç‡§¨‡§∞ ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç‡•§</p>";
        return;
      }
      const stu = students.find(s => s.symbol === sym);
      if (!stu) {
        rb.innerHTML = `<p style='color:red;'>Symbol ‡§®‡§Æ‡•ç‡§¨‡§∞ <strong>${sym}</strong> ‡§ï‡•ã ‡§®‡§§‡§ø‡§ú‡§æ ‡§≠‡•á‡§ü‡§ø‡§è‡§®‡•§</p>`;
        return;
      }

      let out = `<div class='label'>‡§®‡§æ‡§Æ:</div> ${stu.name}<br>
                 <div class='label'>‡§ú‡§®‡•ç‡§Æ ‡§Æ‡§ø‡§§‡§ø:</div> ${stu.dob}<br>
                 <div class='label'>GPA:</div> ${stu.gpa}<br>
                 <div class='label'>‡§µ‡§ø‡§∑‡§Ø‡§π‡§∞‡•Ç ‡§∞ ‡§ó‡•ç‡§∞‡•á‡§°‡§π‡§∞‡•Ç:</div><ul>`;
      stu.subjects.forEach(s => {
        out += `<li>${s.name}: Theory - ${s.theory}, Practical - ${s.practical}</li>`;
      });
      out += "</ul>";
      rb.innerHTML = out;
    }
  </script>
</body>
</html>
